<% layout("/layouts/boilerplate.ejs") %>


<body>
    <div class="container">
        <div class="details-container">
            <h3><%= listing.title %></h3>

            <div class="card">
                    <img src="<%= listing.image %>" class="card-img-top" alt="Location_Image" style="height: 15rem">
              </div>

            <ul>
                <li><strong>Description:</strong> <%= listing.description %></li>
                <li><strong>Price:</strong> &#8377 <%= listing.price.toLocaleString("en-IN") %></li>
                <li><strong>Location:</strong> <%= listing.location %></li>
                <li><strong>Country:</strong> <%= listing.country %></li>
            </ul>
            <a href="/listings/<%= listing._id %>/edit" class="btn btn-primary">Edit This Listing</a>
            <form action="/listings/<%= listing._id %>?_method=DELETE" method="post">
                <button type="submit" class="btn btn-danger">Delete this Listing</button>
            </form>
        </div>
        <hr>
        <div class="review-container">
            <h4>Leave a Review</h4>
            <form action="/listings/<%= listing._id %>/reviews" method="POST">
                <div class="form-group">
                    <label for="rating">Rating:</label>
                    <input type="range" min="1" max="5" id="rating" name="rating" class="styled-range" value="3">
                </div>
                <div class="form-group">
                    <label for="Comment">Comments Here:</label>
                    <textarea name="Comment" id="comment" cols="30" rows="5" required placeholder="Your Feedback Matters.."></textarea>
                </div>
                <button type="submit" class="btn-submit">Submit</button>
            </form>
        </div>
        <hr/>

     

        <p><b>All Reviews</b></p>
        <div class="row review-box">
        <% for(review of listing.reviews) { %>
            <div class="review-cards card col-3"> 
                <div class="card-body">
                    <h5 class="card-title">Jane Doe</h5>
                    <p class="card-text"><%= review.Comment %></p>
                    <p class="card-text"><%= review.rating %> star</p>
                </div>
                <form action="/listings/<%= listing._id %>/reviews/<%= review._id %>?_method=DELETE" method="post">
                    <button class="btn btn-sm btn-danger white" type="submit">Delete</button>
                </form>
            </div>
        <% } %> 
    </div>

<!-- styling for the review and all reviews portion of the page -->
        <style>
              textarea::placeholder {
        color: #999; /* Placeholder text color */
        font-style: italic; /* Placeholder text style */
    }

            .review-cards{
                border: 1px soild rgb(0, 0, 0) !important;
                /* background-color: red; */
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                margin: 20px;
            }
            .review-box{
                margin-left: 100px;
            }
            .review-container {
                background-color: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                max-width: 600px;
                width: 100%;
                margin: 20px auto;
            }
        
            h4 {
                color: #fe424d;
                text-align: center;
            }
        
            form {
                display: flex;
                flex-direction: column;
            }
        
            .form-group {
                margin-bottom: 15px;
            }
        
            label {
                margin-bottom: 5px;
                font-weight: bold;
                color: #333;
            }
        
            textarea {
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 14px;
                width: 100%;
                box-sizing: border-box;
            }
        
            textarea:focus {
                outline: none;
                border-color: #fe424d;
                box-shadow: 0 0 4px #fe424d;
            }
            
            .styled-range {
        -webkit-appearance: none;
        width: 100%;
        height: 8px;
        border-radius: 5px;
        background: #ddd;
        outline: none;
        opacity: 0.7;
        transition: opacity .2s;
    }

    .styled-range:hover {
        opacity: 1;
    }

    .styled-range::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fe424d;
        cursor: pointer;
    }

    .styled-range::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fe424d;
        cursor: pointer;
    }

        
            .btn-submit {
                background-color: #fe424d;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 4px;
                cursor: pointer;
                transition: background-color 0.3s;
                font-size: 14px;
                align-self: center;
                width: 120px;
            }
        
            .btn-submit:hover {
                background-color: #d43a42;
            }
        </style>
 
    </div>
</body>
